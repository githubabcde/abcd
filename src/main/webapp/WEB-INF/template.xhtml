<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>#{msg.newAgeErp}</title>
        <style>
            #mySidenav {
                height: 100%;
                width: 0px;
                position: fixed;
                background-color: #ebedf0;
                overflow-x: hidden;
                transition: 0.5s;
            }
            #main {
                transition: 0.5s;
            }
        </style>
    </h:head>
    <h:body id="body" dir="#{view.locale.language eq 'ar'? 'rtl' : 'ltr' }" style="margin: 0">
        <f:view locale="#{not empty session.getAttribute('language')? session.getAttribute('language') : 'en'}">
            <div id="mySidenav">
                <div style="top: 50px">
                    <i style="color: #007be5;font-size:30px;cursor:pointer;margin: 9px;" class="fa fa-close" onclick="closeNav()"/>                        
                </div>
                <h:form>
                    <p:panelMenu>
                        <p:submenu label="${msg.settings}">
                            <p:submenu label="${msg.security}">
                                <p:menuitem value="${msg.users}" outcome="/security/user/list"/>
                                <p:menuitem value="${msg.groups}" outcome="/security/user/list"/>
                                <p:menuitem value="${msg.permissions}" outcome="/security/user/list"/>
                            </p:submenu>
                        </p:submenu>
                    </p:panelMenu>
                </h:form>
            </div>
            <div id="main">
                <div id="top" style="height: 50px;background-color: #448ed3;">
                    <div style="float: #{view.locale.language eq 'ar'? 'right' : 'left'}">
                        <i id="menu" style="color: white;font-size:30px;cursor:pointer;margin: 9px;" class="fa fa-bars" onclick="openNav()"/>
                    </div>
                    <div style="float: #{view.locale.language eq 'ar'? 'left' : 'right'}">
                        <h:form>
                            <p:commandLink id="languages" style="font-size: 32px; color: white;text-decoration: none">
                                <i class="fa fa-language" style="margin: 9px;"/>
                            </p:commandLink>
                            <p:menu overlay="true" trigger="languages" my="left top" at="left bottom">
                                <p:menuitem value="عربي" actionListener="#{accountController.changeLanguage('ar')}" ajax="false"/>
                                <p:separator/>
                                <p:menuitem value="English" actionListener="#{accountController.changeLanguage('en')}" ajax="false"/>
                            </p:menu>
                            <p:commandLink id="profile" style="font-size: 32px; color: white;text-decoration: none">
                                <i class="fa fa-user-circle" style="margin: 9px;"/>
                            </p:commandLink>
                            <p:menu overlay="true" trigger="profile" my="left top" at="left bottom">
                                <p:menuitem value="#{msg.logout}" actionListener="#{accountController.logout()}" action="index.xhtml/?faces-redirect=true"/>
                            </p:menu>
                        </h:form>
                    </div>
                </div>
                <div id="content" style="margin: 10px;">
                    <ui:insert id="mainContents" name="mainContent"/>
                    <p:blockUI id="globalBlock" widgetVar="globalBlock" block="body"/>
                    <p:growl id="globalMessages"/>
                    <h:form>
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="${msg.yes}" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                            <p:commandButton value="${msg.no}" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                        </p:confirmDialog>
                    </h:form>
                </div>
            </div>
        </f:view>
        <script>
            function openNav() {
                document.getElementById("mySidenav").style.width = "300px";
                document.getElementById("main").style.#{view.locale.language eq 'ar'?'marginRight':'marginLeft'} = "300px";
                document.getElementById("menu").style.display = "none";
            }
            function closeNav() {
                document.getElementById("mySidenav").style.width = "0px";
                document.getElementById("main").style.margin = "0px";
                document.getElementById("menu").style.display = "block";
            }
        </script>
    </h:body>
</html>